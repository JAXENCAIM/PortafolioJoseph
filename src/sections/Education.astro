---
const education = [
  {
    institution: "UNAM — Universidad Nacional Autónoma de México",
    degree: "Pasantía Internacional de Investigación",
    date: "2023",
    detail: "Beca DARI · Calificación de Excelencia 9.5/10",
    location: "Ciudad de México, México",
    highlight: true,
  },
  {
    institution: "PUCP — Pontificia Universidad Católica del Perú",
    degree: "Ingeniería Civil",
    date: "2019 – 2024",
    detail: "Beca BEAS · 4to puesto de la Facultad",
    location: "Lima, Perú",
    highlight: true,
  },
];

const certs = [
  { name: "Primavera P6 Project Planning", issuer: "Udemy", year: "2024" },
  { name: "Control de Proyectos con Power BI", issuer: "Udemy", year: "2024" },
  { name: "Last Planner System 2.0", issuer: "Lean Construction", year: "2023" },
  { name: "AutoCAD Civil 3D", issuer: "SENCICO", year: "2023" },
];
---

<section class="section" id="educacion">
  <div class="max-w-5xl mx-auto">
    <div class="mb-16">
      <p class="text-[10px] font-mono uppercase tracking-[0.5em] text-[#00f6ff] mb-4">02. Formación</p>
      <h2 class="text-5xl md:text-7xl font-black leading-none uppercase tracking-tighter">
        Educación<span class="text-[#00f6ff]">.</span>
      </h2>
    </div>

    <!-- Timeline -->
    <div class="relative border-l border-slate-800 pl-8 md:pl-12 mb-20 space-y-12" id="edu-timeline">
      {education.map((item, i) => (
        <div class="edu-item opacity-0 relative" style={`--delay: ${i * 0.2}s`}>
          <div class={`absolute -left-[2.6rem] md:-left-[3.6rem] top-1 w-3 h-3 rounded-full border-2 ${item.highlight ? 'border-[#00f6ff] bg-[#00f6ff]/20' : 'border-slate-600 bg-transparent'}`}></div>
          <div class="flex flex-col md:flex-row md:items-start md:justify-between gap-2 mb-3">
            <div>
              <h3 class="text-lg md:text-xl font-bold text-white">{item.degree}</h3>
              <p class="text-[#00f6ff] font-mono text-sm">{item.institution}</p>
            </div>
            <span class="text-xs font-mono text-slate-500 uppercase tracking-widest whitespace-nowrap">{item.date}</span>
          </div>
          <p class="text-sm text-slate-400 font-mono">{item.detail}</p>
          <p class="text-xs text-slate-600 mt-1">{item.location}</p>
        </div>
      ))}
    </div>

    <!-- Certifications -->
    <div>
      <p class="text-[10px] font-mono uppercase tracking-[0.5em] text-slate-500 mb-8">Certificaciones</p>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="cert-grid">
        {certs.map((cert, i) => (
          <div class="cert-item opacity-0 flex items-start gap-4 border border-slate-800 p-5 hover:border-[#00f6ff]/30 transition-colors" style={`--delay: ${i * 0.1}s`}>
            <div class="w-1 h-full min-h-[2rem] bg-[#00f6ff]/30 flex-shrink-0 mt-1"></div>
            <div>
              <p class="text-sm font-semibold text-white">{cert.name}</p>
              <p class="text-xs font-mono text-slate-500 mt-1">{cert.issuer} · {cert.year}</p>
            </div>
          </div>
        ))}
      </div>
    </div>
  </div>
</section>

<script>
  import { gsap } from 'gsap';
  import { ScrollTrigger } from 'gsap/ScrollTrigger';

  gsap.registerPlugin(ScrollTrigger);

  const animateItems = (selector: string) => {
    document.querySelectorAll(selector).forEach((el) => {
      gsap.set(el, { y: 40 });
      gsap.to(el, {
        opacity: 1,
        y: 0,
        duration: 0.7,
        ease: 'power3.out',
        scrollTrigger: {
          trigger: el,
          start: 'top 88%',
          once: true,
        },
      });
    });
  };

  animateItems('.edu-item');
  animateItems('.cert-item');
</script>
